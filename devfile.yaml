schemaVersion: 2.1.0
metadata:
  name: cpp
components:
  - name: tools
    container:
      image: registry.redhat.io/devspaces/udi-rhel8@sha256:de81824e6ccf82a286a28566432d4f43928a989c570578c4b4df9484ef136cca
      memoryLimit: 1G
      mountSources: true
      env:
        - name: MAVEN_CONFIG
          value: /home/user/.m2
      volumeMounts:
        - name: m2
          path: /home/user/.m2
          
  - name: m2
    volume:
      configMap:
        name: settings-xml
        defaultMode: 420
      size: 1G
      
commands:
    - id: maven-build
      exec:
        component: tools
        workingDir: ${PROJECT_SOURCE}
        commandLine: mvn clean install
        group:
          kind: build
          isDefault: true
